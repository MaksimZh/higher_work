# Когда наследование лучше композиции?

## 1. Теория
У меня всегда было ощущение, что наследование создаёт слишком сильную связь
и для подтипирования,
и для повторного использования кода,
и для расширения поведения.
Возможно дело в том, что оно делает сразу все три эти вещи,
и велики шансы, что минимум с одной из них что-то пойдёт не по плану.
Классический пример с классом `Квадрат`, который "портит" спецификацию
родительского класса `Прямоугольник` -
это случай нарушения подтипирования из-за переопределения поведения.
Здесь возможность, предназначенная для расширения,
использована не по назначению.
Вероятно, подтипирование портится чаще других аспектов наследования,
потому что (насколько мне известно)
никак не защищено на уровне статического анализа кода.

Принцип подстановки Лисков, который вытекает из определения подтипа,
как раз призван защитить подтипирование.
Пока инструменты для статической проверки корректности кода
недостаточно развиты,
оптимальным вариантом является динамическая проверка
соответствия классов-потомков спецификации родителя
с помощью автоматических тестов.