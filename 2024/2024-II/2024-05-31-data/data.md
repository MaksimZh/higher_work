# Как правильно думать над моделью данных

## 1. Выводы по теории
Избыток (дублирование) информации усложняет реализацию
(особенно синхронизацию), но упрощает интерфейс для пользователей.

Здесь имеется в виду интерфейс в широком смысле - как спецификация,
включающая в себя не только формат доступа к данным,
но и гарантии сложности (скорости работы) отдельных операций.
Если у нас есть набор пар `(A, B)`,
то наличие словарей вида `A[B]` и `B[A]`
делает операции поиска по `A` и `B` одинаково быстрыми.
Если же есть только один словарь, то одна из операций в общем случае
будет существенно медленнее.

Каждая операция изменения должна поддерживать
инвариан согласованности словарей.
Тут важен баланс между сложностью кода и скоростью операций.
Время на синхронизацию тоже нужно учитывать.

Моё личное мнение:
производительность важнее простоты,
а надёжность важнее производительности.
Если мы можем обеспечить надёжность кода синхронизации
за счёт правильного проектирования и тестирования,
то стоит в него вложиться ради увеличения производительности.

В примере с двумя словарями возможен вариант,
когда один из них генерируется и кэшируется по запросу.
Это довольно сложный вариант, но он имеет преимущество,
когда большое количество операций записи
чередуется с большим количеством операций чтения.
В этом случае синхронизация при каждой записи нецелесообразна,
а кэширование ускорит чтение.
